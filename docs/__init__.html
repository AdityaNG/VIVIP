<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>__init__.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>__init__.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <h1>libvivp</h1>
<p>Contains all helper functions to interface with a vpackage</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.vPackage</span> <span class="kn">import</span> <span class="n">vPackage</span>
<span class="kn">from</span> <span class="nn">git</span> <span class="kn">import</span> <span class="n">Git</span>
<span class="kn">import</span> <span class="nn">git</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">subprocess</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <h2>setup(vivp_dir, packageName, packageAuthors, packageURL)</h2>
<p>Runs a quick setup on the vivp_dir</p>
<p>Creates vpackage.json with packageName, packageAuthors and packageURL</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory already has a vpackage.json</li>
<li>packageURL is not a valid URL</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">packageName</span><span class="p">,</span> <span class="n">packageAuthors</span><span class="p">,</span> <span class="n">packageURL</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Already VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;packageDetails&#39;</span><span class="p">][</span><span class="s1">&#39;packageName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageName</span>
    <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;packageDetails&#39;</span><span class="p">][</span><span class="s1">&#39;packageAuthors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageAuthors</span>
    <span class="k">if</span> <span class="n">packageURL</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">is_valid_git_url</span><span class="p">(</span><span class="n">packageURL</span><span class="p">)):</span>
            <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;packageURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageURL</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid packageURL : &#39;</span> <span class="o">+</span> <span class="n">packageURL</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <h2>install(vivp_dir, package_list)</h2>
<p>Installs a list of packages (package_list)</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>Dependency already exists</li>
<li>Invalid dependency URL</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">package_list</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_valid_git_url</span><span class="p">(</span><span class="n">dep</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">has_dependency</span><span class="p">(</span><span class="n">dep</span><span class="p">):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;dependencyList&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Dependency already added: &#39;</span> <span class="o">+</span> <span class="n">dep</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid dependency : &#39;</span> <span class="o">+</span> <span class="n">dep</span><span class="p">)</span>
    
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">refresh_all_dependencies</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)</span>
    <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <h2>update(vivp_dir)</h2>
<p>Updates all the depenencies to appropriate version</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">refresh_all_dependencies</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <h2>remove(vivp_dir, package_list)</h2>
<p>Removes the list of dependencies (package_list)</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>Dependency does not exist</li>
<li>Invalid dependency URL</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">package_list</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">package_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_valid_git_url</span><span class="p">(</span><span class="n">dep</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">has_dependency</span><span class="p">(</span><span class="n">dep</span><span class="p">):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;dependencyList&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Dependency does not in list : &#39;</span> <span class="o">+</span> <span class="n">dep</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Invalid dependency : &#39;</span> <span class="o">+</span> <span class="n">dep</span><span class="p">)</span>
    
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">refresh_all_dependencies</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)</span>
    <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <h2>list_vivp(vivp_dir)</h2>
<p>Lists all the dependencies and the modules they have exposed throught the &lsquo;fileList&rsquo;</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">list_vivp</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>TODO Return the result as dictionary</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>dependency_files_list = []</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)):</span>
        <span class="n">folder_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">folder_list</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>
            <span class="n">package_dep_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">),</span> <span class="n">dep</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dep_path</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">dep_file</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;fileList&#39;</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">dep_file</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>dependency_files_list.append(os.path.join(package_dep_path, dep_file))</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <h2>refresh_all_dependencies(vivp_dir)</h2>
<p>Updates all the depenencies to appropriate version</p>
<p>Clears the cache entirely and performs a git clone on all dependencies</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">refresh_all_dependencies</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>TODO use git clone
TODO add version control support for the dependencies</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="s2">&quot;Clearing cache&quot;</span><span class="p">)</span>
    <span class="n">CACHE_DIR</span> <span class="o">=</span> <span class="n">get_cache_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)</span>
    <span class="n">REPOS_DIR</span> <span class="o">=</span> <span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>Remove VPACKAGE_HIDDEN directory</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">CACHE_DIR</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">CACHE_DIR</span><span class="p">)</span>

    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">CACHE_DIR</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">REPOS_DIR</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>iterate through all packages and clone</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;dependencyList&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="s2">&quot;git clone &quot;</span><span class="p">,</span> <span class="n">dep</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">git</span><span class="o">.</span><span class="n">Git</span><span class="p">(</span><span class="n">REPOS_DIR</span><span class="p">)</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <h2>get_files_from_dependencies(vivp_dir)</h2>
<p>Returns the list of all file paths that are exposed by &lsquo;fileList&rsquo;</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">get_files_from_dependencies</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">dependency_files_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)):</span>
        <span class="n">folder_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">folder_list</span><span class="p">:</span>
            <span class="n">package_dep_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_repos_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">),</span> <span class="n">dep</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dep_path</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">dep_file</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;fileList&#39;</span><span class="p">]:</span>
                <span class="n">dependency_files_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dep_path</span><span class="p">,</span> <span class="n">dep_file</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">dependency_files_list</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <h2>execute(vivp_dir)</h2>
<p>Runs the testbench : </p>
<pre><code class="language-bash">$ rm *.out *.vcd
$ iverilog [testBench List] -I vivp_dir/.vpackage/repos/
$ vvp a.out
$ gtkwave {*.vcd}[0]
</code></pre>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>More than 1 VCD file</li>
<li>No VCD Files</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;testBench&#39;</span><span class="p">]:</span>
        <span class="n">file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_safe</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>
    
    <span class="n">vcd_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.vcd&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">for</span> <span class="n">vcd_file</span> <span class="ow">in</span> <span class="n">vcd_files</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">vcd_file</span><span class="p">)</span>
    
    <span class="n">out_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.out&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">for</span> <span class="n">out_file</span> <span class="ow">in</span> <span class="n">out_files</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>TODO : Load files from .vpackage/repos/</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">exec_arr</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;iverilog&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="n">exec_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">exec_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-I&quot;</span><span class="p">)</span>
    <span class="n">exec_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;.vpackage/repos/&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exec_arr</span><span class="p">))</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">exec_arr</span><span class="p">)</span>
    <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="n">exec_str</span> <span class="o">=</span> <span class="s2">&quot;vvp a.out&quot;</span> <span class="c1"># check list of .out files</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="n">exec_str</span><span class="p">)</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">exec_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="n">vcd_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.vcd&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vcd_files</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Failed : no VCD Files&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">vcd_files</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">exec_str</span> <span class="o">=</span> <span class="s2">&quot;gtkwave &quot;</span> <span class="o">+</span> <span class="n">vcd_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="n">exec_str</span><span class="p">)</span>
        <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">exec_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
        <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="s2">&quot;Done...&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Failed : too many VCD Files&quot;</span><span class="p">)</span>
    <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <h2>execute_legacy1(vivp_dir)</h2>
<p>Legacy testbench; Gathers all fileList from all dependencies and fileList+testBench List from current vivp_dir and runs it through iverilog</p>
<p>Better to use include statements instead</p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>More than 1 VCD file</li>
<li>No VCD Files</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">execute_legacy1</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;fileList&#39;</span><span class="p">]:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>file_list.append(&lsquo;&ldquo;&rsquo; + os.path.join(vivp_dir, f) + &lsquo;&ldquo;&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_safe</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;testBench&#39;</span><span class="p">]:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>file_list.append(&lsquo;&ldquo;&rsquo; + os.path.join(vivp_dir, f) + &lsquo;&ldquo;&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_safe</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>
    <span class="n">dependency_files</span> <span class="o">=</span> <span class="n">get_files_from_dependencies</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">dependency_files</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <p>file_list.append(&lsquo;&ldquo;&rsquo; + f + &lsquo;&ldquo;&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">file_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_safe</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>

    <span class="n">vcd_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.vcd&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">for</span> <span class="n">vcd_file</span> <span class="ow">in</span> <span class="n">vcd_files</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">vcd_file</span><span class="p">)</span>
    
    <span class="n">out_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.out&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">for</span> <span class="n">out_file</span> <span class="ow">in</span> <span class="n">out_files</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>TODO : Load files from .vpackage/repos/</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">exec_str</span> <span class="o">=</span> <span class="s2">&quot;iverilog &quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_list</span><span class="p">)</span>
    <span class="n">exec_arr</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;iverilog&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="n">exec_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="n">exec_str</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>proc = subprocess.Popen(exec_str.split(&rdquo; &ldquo;))</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">exec_arr</span><span class="p">)</span>
    <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="n">exec_str</span> <span class="o">=</span> <span class="s2">&quot;vvp a.out&quot;</span> <span class="c1"># check list of .out files</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="n">exec_str</span><span class="p">)</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">exec_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="n">vcd_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.vcd&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="p">))</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vcd_files</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Failed : no VCD Files&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">vcd_files</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">exec_str</span> <span class="o">=</span> <span class="s2">&quot;gtkwave &quot;</span> <span class="o">+</span> <span class="n">vcd_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="n">exec_str</span><span class="p">)</span>
        <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">exec_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
        <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[vivp]&quot;</span><span class="p">,</span> <span class="s2">&quot;Done...&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Failed : too many VCD Files&quot;</span><span class="p">)</span>
    <span class="k">pass</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <h2>add_testbench(vivp_dir, file_list)</h2>
<p>Adds file_list to &lsquo;testBench&rsquo; list </p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>File Already in List</li>
<li>Invalid file path</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">add_testbench</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">file_list</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_sub_file</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">has_testbench</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;testBench&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File already in list : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid path : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <h2>remove_testbench(vivp_dir, file_list)</h2>
<p>Removes file_list from &lsquo;testBench&rsquo; list </p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>File not in List</li>
<li>Invalid file path</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">remove_testbench</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">file_list</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_sub_file</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">has_testbench</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;testBench&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File not in list : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid path : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <h2>add_files(vivp_dir, file_list)</h2>
<p>Adds file_list to &lsquo;fileList&rsquo; list </p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>File Already in List</li>
<li>Invalid file path</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">add_files</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">file_list</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_sub_file</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">has_file</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;fileList&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File already in list : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid path : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <h2>remove_files(vivp_dir, file_list)</h2>
<p>Removes file_list from &lsquo;fileList&rsquo; list </p>
<h3>Raises exception if</h3>
<ol>
<li>Input directory does not have a vpackage.json</li>
<li>File not in List</li>
<li>Invalid file path</li>
</ol>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">remove_files</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">file_list</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_vivp_dir</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not VIVP directory&quot;</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">vPackage</span><span class="p">(</span><span class="n">filePath</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">VPACKAGE_JSON</span><span class="p">),</span> <span class="n">createNew</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">saveable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_sub_file</span><span class="p">(</span><span class="n">vivp_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">has_file</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;fileList&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File not in list : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid path : &quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
